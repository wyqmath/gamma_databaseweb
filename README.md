# Î³-åˆ†æ³Œé…¶æ¯”è¾ƒæ•°æ®åº“

ä¸€ä¸ªç”¨äºæ¯”è¾ƒä¸åŒç‰©ç§Î³-åˆ†æ³Œé…¶å¤åˆç‰©äºšåŸºçš„ç»¼åˆæ€§ç½‘ç»œå¹³å°ï¼Œæä¾›è¯¦ç»†çš„åºåˆ—æ¯”å¯¹ã€ç»“æ„åˆ†æå’Œè¿›åŒ–æ´å¯Ÿã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ§¬ æ¯”è¾ƒåˆ†æç³»ç»Ÿ
- [x] **è·¨ç‰©ç§æ¯”è¾ƒåˆ†æ** - ä»¥äººç±»ä¸ºå‚è€ƒæ ‡å‡†çš„äºšåŸºæ¯”è¾ƒåˆ†æ
- [x] **åºåˆ—ç›¸ä¼¼åº¦è®¡ç®—** - åŸºäºBLOSUM62çŸ©é˜µçš„åºåˆ—identityå’Œsimilarityåˆ†æ
- [x] **ç»“æ„ç›¸ä¼¼åº¦è¯„ä¼°** - é›†æˆUS-alignè¿›è¡ŒRMSDã€TM-scoreç­‰ç»“æ„æ¯”è¾ƒ
- [x] **å¤šåºåˆ—æ¯”å¯¹** - ä½¿ç”¨BioMSAåº“çš„é«˜æ€§èƒ½åºåˆ—æ¯”å¯¹åŠŸèƒ½
- [x] **3Dç»“æ„å¯è§†åŒ–** - åŸºäºMolstarçš„äº¤äº’å¼ç»“æ„æŸ¥çœ‹å™¨

### ğŸ”¬ æ•°æ®åˆ†æå·¥å…·
- [x] **ä¿å®ˆæ€§åˆ†æ** - è¯†åˆ«åŠŸèƒ½é‡è¦çš„ä¿å®ˆåŒºåŸŸå’Œå…³é”®ä½ç‚¹
- [x] **è¿›åŒ–å…³ç³»å±•ç¤º** - ç³»ç»Ÿå‘è‚²æ ‘å’Œè¿›åŒ–è·ç¦»å¯è§†åŒ–
- [x] **ç»Ÿè®¡æŒ‡æ ‡è®¡ç®—** - åºåˆ—ç»„æˆã€åˆ†å­é‡ã€ç–æ°´æ€§ç­‰ç”Ÿç‰©åŒ–å­¦å‚æ•°
- [x] **æ•°æ®å¯¼å‡ºåŠŸèƒ½** - æ”¯æŒæ¯”è¾ƒç»“æœå’Œåºåˆ—æ•°æ®çš„æ‰¹é‡ä¸‹è½½

## ğŸ›  æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: Next.js 15 with App Router
- **è¯­è¨€**: TypeScript æä¾›ç±»å‹å®‰å…¨
- **æ ·å¼**: Tailwind CSS + shadcn/ui ç»„ä»¶
- **å›¾æ ‡**: Lucide React ç°ä»£å›¾æ ‡åº“
- **åºåˆ—åˆ†æ**: BioMSA é«˜æ€§èƒ½å¤šåºåˆ—æ¯”å¯¹
- **ç»“æ„å¯è§†åŒ–**: Molstar 3Dåˆ†å­æŸ¥çœ‹å™¨

### åç«¯ & æ•°æ®å¤„ç†
- **API**: Next.js API Routes
- **ç»“æ„æ¯”è¾ƒ**: US-align ç»“æ„æ¯”å¯¹å·¥å…·
- **æ•°æ®å­˜å‚¨**: JSON æ–‡ä»¶å­˜å‚¨åœ¨ public/data/ ç›®å½•
- **æ–‡ä»¶æ ¼å¼**: CIFæ ¼å¼çš„3Dç»“æ„æ–‡ä»¶

## ğŸ“ é¡¹ç›®ç»“æ„

```
gamma-web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router é¡µé¢
â”‚   â”‚   â”œâ”€â”€ admin/             # ç®¡ç†é¢æ¿
â”‚   â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ structural-comparison/  # ç»“æ„æ¯”è¾ƒAPI
â”‚   â”‚   â”œâ”€â”€ msa/              # å¤šåºåˆ—æ¯”å¯¹é¡µé¢
â”‚   â”‚   â”œâ”€â”€ evolution/         # è¿›åŒ–åˆ†æ
â”‚   â”‚   â”œâ”€â”€ login/             # ç”¨æˆ·è®¤è¯
â”‚   â”‚   â”œâ”€â”€ species/           # ç‰©ç§ç´¢å¼•å’Œè¯¦æƒ…
â”‚   â”‚   â”‚   â””â”€â”€ [speciesId]/   # åŠ¨æ€ç‰©ç§é¡µé¢
â”‚   â”‚   â”‚       â””â”€â”€ [subunit]/ # ç‰©ç§-äºšåŸºè¯¦æƒ…é¡µé¢
â”‚   â”‚   â””â”€â”€ subunits/          # äºšåŸºè¯¦æƒ…é¡µé¢
â”‚   â”‚       â””â”€â”€ [subunit]/     # åŠ¨æ€äºšåŸºé¡µé¢
â”‚   â”‚           â””â”€â”€ compare/   # ğŸ†• æ¯”è¾ƒåˆ†æé¡µé¢
â”‚   â”œâ”€â”€ components/            # å¯å¤ç”¨Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/               # shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ badge.tsx     # ğŸ†• å¾½ç« ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ progress.tsx  # ğŸ†• è¿›åº¦æ¡ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ...           # å…¶ä»–UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Header.tsx        # å¯¼èˆªå¤´éƒ¨
â”‚   â”‚   â”œâ”€â”€ Footer.tsx        # ç½‘ç«™åº•éƒ¨
â”‚   â”‚   â”œâ”€â”€ Breadcrumb.tsx    # é¢åŒ…å±‘å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ MultipleSequenceAlignmentViewer.tsx  # å¤šåºåˆ—æ¯”å¯¹æŸ¥çœ‹å™¨
â”‚   â”‚   â”œâ”€â”€ SubunitComparisonViewer.tsx  # ğŸ†• äºšåŸºæ¯”è¾ƒåˆ†æç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ThreeDViewer.tsx  # 3Dç»“æ„æŸ¥çœ‹å™¨
â”‚   â”‚   â”œâ”€â”€ MolstarViewer.tsx # Molstaré›†æˆç»„ä»¶
â”‚   â”‚   â””â”€â”€ SimpleSequenceViewer.tsx  # ç®€å•åºåˆ—æŸ¥çœ‹å™¨
â”‚   â”œâ”€â”€ lib/                  # å·¥å…·å‡½æ•°åº“
â”‚   â”‚   â”œâ”€â”€ data.ts          # æ•°æ®è·å–å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ similarity.ts    # ğŸ†• åºåˆ—ç›¸ä¼¼åº¦è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ structural-comparison.ts  # ğŸ†• ç»“æ„æ¯”è¾ƒå·¥å…·
â”‚   â”‚   â””â”€â”€ utils.ts         # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ types/               # TypeScriptç±»å‹å®šä¹‰
â”‚       â””â”€â”€ index.ts         # ğŸ†• æ‰©å±•äº†æ¯”è¾ƒåˆ†æç›¸å…³ç±»å‹
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ data/               # JSONæ•°æ®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ species.json    # ç‰©ç§ä¿¡æ¯
â”‚   â”‚   â”œâ”€â”€ proteins.json   # è›‹ç™½è´¨åºåˆ—å’Œæ•°æ®
â”‚   â”‚   â”œâ”€â”€ gamma_secretase.json  # ä¸»è¦æ•°æ®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ structural_comparisons.json  # ğŸ†• é¢„è®¡ç®—çš„ç»“æ„æ¯”è¾ƒæ•°æ®
â”‚   â”‚   â”œâ”€â”€ interactions.json  # äºšåŸºç›¸äº’ä½œç”¨æ•°æ®
â”‚   â”‚   â”œâ”€â”€ complex_assembly.json  # å¤åˆç‰©ç»„è£…æ•°æ®
â”‚   â”‚   â””â”€â”€ news.json       # æ–°é—»å’Œæ›´æ–°
â”‚   â””â”€â”€ structures/         # è›‹ç™½è´¨ç»“æ„æ–‡ä»¶ (.cif)
â”œâ”€â”€ scripts/                # ğŸ†• æ•°æ®å¤„ç†è„šæœ¬
â”‚   â”œâ”€â”€ generate-data.js    # æ•°æ®ç”Ÿæˆè„šæœ¬
â”‚   â””â”€â”€ precompute-structural-data.js  # ğŸ†• ç»“æ„æ•°æ®é¢„è®¡ç®—
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- npm æˆ– yarn æˆ– pnpm
- (å¯é€‰) US-align å·¥å…·ç”¨äºç»“æ„æ¯”è¾ƒ

### å®‰è£…ä¾èµ–
```bash
npm install
# æˆ–
yarn install
# æˆ–
pnpm install
```

### å¼€å‘æ¨¡å¼
```bash
npm run dev
# æˆ–
yarn dev
# æˆ–
pnpm dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹åº”ç”¨ã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
npm run start
```

## ğŸ§¬ æ¯”è¾ƒåˆ†æåŠŸèƒ½ä½¿ç”¨æŒ‡å—

### è®¿é—®æ¯”è¾ƒåˆ†æ
1. è¿›å…¥ä»»æ„äºšåŸºé¡µé¢ï¼ˆå¦‚ `/subunits/psen1`ï¼‰
2. ç‚¹å‡» **"æ¯”è¾ƒåˆ†æ"** æŒ‰é’®
3. æˆ–ç›´æ¥è®¿é—® `/subunits/psen1/compare`

### åŠŸèƒ½ç‰¹æ€§
- **åºåˆ—ç›¸ä¼¼åº¦åˆ†æ**: æ˜¾ç¤ºä¸äººç±»å‚è€ƒåºåˆ—çš„identityç™¾åˆ†æ¯”
- **ç»“æ„ç›¸ä¼¼åº¦è¯„ä¼°**: å±•ç¤ºRMSDå€¼å’ŒTM-score
- **ä¿å®ˆæ€§ç­‰çº§**: è‡ªåŠ¨è¯„ä¼°ä¿å®ˆç¨‹åº¦ï¼ˆVery High/High/Moderate/Lowï¼‰
- **äº¤äº’å¼æŸ¥çœ‹**:
  - ç‚¹å‡» "Show Alignment" æŸ¥çœ‹å¤šåºåˆ—æ¯”å¯¹
  - ç‚¹å‡» "Show Structures" è¿›è¡Œ3Dç»“æ„å¯¹æ¯”
  - ç‚¹å‡» "Download Data" ä¸‹è½½æ¯”è¾ƒæ•°æ®

### æ”¯æŒçš„æ¯”è¾ƒæŒ‡æ ‡
- **åºåˆ—æŒ‡æ ‡**: Identity, Similarity, Gaps, BLOSUM62 Score
- **ç»“æ„æŒ‡æ ‡**: RMSD, TM-score, GDT-TS, GDT-HA
- **ç»Ÿè®¡ä¿¡æ¯**: æ¯”å¯¹é•¿åº¦, é“¾é•¿åº¦, æ¯”å¯¹æ®‹åŸºæ•°

## ğŸ”§ US-align é›†æˆé…ç½®

### å®‰è£… US-align (å¯é€‰)
```bash
# ä¸‹è½½å¹¶ç¼–è¯‘ US-align
wget https://zhanggroup.org/US-align/bin/module/USalign.cpp
g++ -static -O3 -ffast-math -lm -o USalign USalign.cpp

# å°†å¯æ‰§è¡Œæ–‡ä»¶ç§»åŠ¨åˆ°ç³»ç»ŸPATH
sudo mv USalign /usr/local/bin/
```

### Docker éƒ¨ç½² (æ¨è)
```dockerfile
FROM node:18-alpine

# å®‰è£…ç¼–è¯‘å·¥å…·å’ŒUS-align
RUN apk add --no-cache g++ wget
RUN wget https://zhanggroup.org/US-align/bin/module/USalign.cpp && \
    g++ -static -O3 -ffast-math -lm -o /usr/local/bin/USalign USalign.cpp && \
    rm USalign.cpp

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . /app
WORKDIR /app

# å®‰è£…ä¾èµ–å¹¶æ„å»º
RUN npm install && npm run build

CMD ["npm", "start"]
```

### é¢„è®¡ç®—ç»“æ„æ•°æ®
```bash
# è¿è¡Œé¢„è®¡ç®—è„šæœ¬ç”Ÿæˆç»“æ„æ¯”è¾ƒæ•°æ®
node scripts/precompute-structural-data.js
```

## ğŸ“Š æ•°æ®æ ¼å¼è¯´æ˜

### ä¸»è¦æ•°æ®æ–‡ä»¶
- **gamma_secretase.json**: åŒ…å«æ‰€æœ‰äºšåŸºçš„åºåˆ—å’Œç»“æ„ä¿¡æ¯
- **structural_comparisons.json**: é¢„è®¡ç®—çš„ç»“æ„æ¯”è¾ƒç»“æœ
- **species.json**: ç‰©ç§åˆ†ç±»å’ŒåŸºæœ¬ä¿¡æ¯
- **proteins.json**: è›‹ç™½è´¨è¯¦ç»†ä¿¡æ¯

### ç»“æ„æ¯”è¾ƒæ•°æ®æ ¼å¼
```json
{
  "PSEN1": {
    "mouse": {
      "rmsd": 0.85,
      "tmScore": 0.956,
      "alignedLength": 459,
      "sequenceIdentity": 94.7,
      "gdt_ts": 95.6,
      "gdt_ha": 91.2
    }
  }
}
```

##  TODO å¾…åŠäº‹é¡¹

### ğŸ”§ åŠŸèƒ½å¢å¼º
- [ ] **US-aligné›†æˆä¼˜åŒ–** - å®Œå–„æœåŠ¡å™¨ç«¯US-alignå·¥å…·çš„éƒ¨ç½²å’Œé…ç½®
- [ ] **æ‰¹é‡æ¯”è¾ƒåˆ†æ** - æ”¯æŒå¤šä¸ªäºšåŸºåŒæ—¶è¿›è¡Œæ¯”è¾ƒåˆ†æ
- [ ] **é«˜çº§æœç´¢åŠŸèƒ½** - å®ç°åŸºäºåºåˆ—ç›¸ä¼¼æ€§ã€åŠŸèƒ½åŸŸã€ç‰©ç§åˆ†ç±»çš„é«˜çº§æœç´¢
- [ ] **ç”¨æˆ·ç³»ç»Ÿ** - æ·»åŠ ç”¨æˆ·æ³¨å†Œã€ç™»å½•å’Œä¸ªäººæ•°æ®ç®¡ç†åŠŸèƒ½
- [ ] **APIæ–‡æ¡£** - å®Œå–„REST APIæ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
- [ ] **æ€§èƒ½ä¼˜åŒ–** - å®ç°æ•°æ®ç¼“å­˜å’Œæ‡’åŠ è½½æœºåˆ¶
- [ ] **ç§»åŠ¨ç«¯é€‚é…** - ä¼˜åŒ–ç§»åŠ¨è®¾å¤‡ä¸Šçš„ç”¨æˆ·ä½“éªŒ

### ğŸ§ª æµ‹è¯•å’Œè´¨é‡
- [ ] **å•å…ƒæµ‹è¯•** - ä¸ºæ ¸å¿ƒåŠŸèƒ½æ·»åŠ å®Œæ•´çš„æµ‹è¯•è¦†ç›–
- [ ] **é›†æˆæµ‹è¯•** - æµ‹è¯•APIæ¥å£å’Œæ•°æ®æµ
- [ ] **æ€§èƒ½æµ‹è¯•** - å¤§æ•°æ®é‡ä¸‹çš„æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] **å¯è®¿é—®æ€§** - æ”¹è¿›æ— éšœç¢è®¿é—®æ”¯æŒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [US-align](https://zhanggroup.org/US-align/) - ç»“æ„æ¯”å¯¹å·¥å…·
- [BioMSA](https://github.com/malanjary-ut/biomsa) - å¤šåºåˆ—æ¯”å¯¹åº“
- [Molstar](https://molstar.org/) - 3Dåˆ†å­å¯è§†åŒ–
- [Next.js](https://nextjs.org/) - Reactæ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - CSSæ¡†æ¶
- [shadcn/ui](https://ui.shadcn.com/) - UIç»„ä»¶åº“
